<!-- https://github.com/pages-themes/architect/blob/master/_layouts/default.html -->
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="https://ibbtek.github.io/simple-quran-api/assets/css/style.css?v=a757f993e7e101c5c482c32839ed69d952739a37" media="screen" type="text/css">
    <link rel="stylesheet" href="https://ibbtek.github.io/simple-quran-api/assets/css/print.css" media="print" type="text/css">
    <link rel="stylesheet" href="./assets/css/pti.css">
    <!-- development version, includes helpful console warnings -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> -->
    <!-- production version, optimized for size and speed -->
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <style type = "text/css">
      @font-face {
        font-family: "Uthmani-Hafs";
        src: url("./assets/fonts/Uthmani-Hafs.otf");
      }
    </style>
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Ibbtek | simple-quran-api</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Ibbtek" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A simple Quran API" />
<meta property="og:description" content="A simple Quran API" />
<link rel="canonical" href="https://ibbtek.github.io/simple-quran-api/" />
<meta property="og:url" content="https://ibbtek.github.io/simple-quran-api/" />
<meta property="og:site_name" content="simple-quran-api" />
<script type="application/ld+json">
{"@type":"WebSite","headline":"Ibbtek","url":"https://ibbtek.github.io/simple-quran-api/","name":"simple-quran-api","description":"A simple Quran API","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <header>
      <div class="inner">
        <a href="https://ibbtek.github.io/simple-quran-api/">
          <h1>simple-quran-api</h1>
        </a>
        <h2>A simple Quran API</h2>
        
          <a href="https://github.com/ibbtek/simple-quran-api" class="button"><small>View project on</small> GitHub</a>
        
        
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <!-- START CODE simple-quran-api -->
          <div id="app">
            <div class="pti-container">
              <div class="pti-row">
                <div class="pti-col-4">
                  <select v-model="lang" class="pti-select">
                    <option
                      v-for="(value, key) in langList"
                      :key="key"
                      :value="key">
                      {{ value }}
                    </option>
                  </select>
                </div>
                <div class="pti-col-4">
                  <select v-model="sura" class="pti-select">
                    <option
                      v-for="sura in suraList"
                      :key="sura.id"
                      :value="sura.id">
                      {{ sura.title }}
                    </option>
                  </select>
                </div>
                <div class="pti-col-4">
                  <select v-model="aya" class="pti-select">
                    <option
                      v-for="aya in ayat"
                      :key="aya"
                      :value="aya">
                      {{ aya }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="pti-row">
                <div class="pti-col-4">
                  <p>Translated by: <strong>{{ translator }}</strong></p>
                </div>
                <div class="pti-col-4">
                  <p>Revealed at: <strong>{{ revealed }}</strong></p>
                </div>
                <div class="pti-col-4">
                  <p>Total ayat: <strong>{{ ayat }}</strong></p>
                </div>
              </div>
              <div class="pti-row pti-is-center pti-m-b-3">
                  <div class="pti-pagination">
                    <a @click="pageChange(-1)">&lt;</a>
                    <input v-model="currentPage"/><span> /{{ totalPages }}</span>
                    <a @click="pageChange(1)">&gt;</a>
                  </div>
                  <!-- <at-pagination
                    :total="ayat"
                    :page-size="pageSize"
                    :current="currentPage"
                    @page-change="pageChange($event)"
                    simple></at-pagination> -->
              </div>
              <div class="pti-row pti-is-center pti-m-b-3">
                <div v-if="sura != 9"
                  class="basmallah pti-rtl-text">
                  {{ basmallah }}
                </div>
              </div>
              <div class="pti-row  pti-is-center ayat-text"
                :class="{'pti-rtl-text': rtlLang}">
                <span v-for="line in text">
                  {{ line | basmallah }}
                  <span v-if="rtlLang">﴿</span>
                  <span v-else>﴾</span>
                  {{ line.aya | oneDigit }}
                  <span v-if="rtlLang">﴾</span>
                  <span v-else>﴿</span>
                </span>
              </div>
            </div>
          </div>
          <!-- END CODE simple-quran-api -->
        </section>

        <aside id="sidebar">
          <h3>Credits</h3>
          <ul>
            <li>API build: 
              <a ref="https://github.com/eduardoboucas/static-api-generator" target="_blank">
                static-api-generator
              </a>
            </li>
            <li>Translations: 
              <a ref="http://tanzil.net/docs/" target="_blank">
                Tanzil.net
              </a>
            </li>
          </ul>
          <h3>GET Sura Al-Fatiha in Arabic:</h3>
          <ul> 
            <li>
              <a href="https://ibbtek.github.io/simple-quran-api/api/ar/s001.json" target="_blank">
                ibbtek.github.io/simple-quran-api/api/ar/s001.json
              </a>
            </li>
          </ul>
          <h3>GET Aya Al-Kursiy in English:</h3>
          <ul>
            <li>
              <a href="https://ibbtek.github.io/simple-quran-api/api/en/s002/v255.json" target="_blank">
                ibbtek.github.io/simple-quran-api/api/en/s002/v255.json
              </a>
            </li>
          </ul>
          <p><small>More info <a href="https://github.com/ibbtek/simple-quran-api">here</a></small></p>
          <p><style>.bmc-button img{width: 27px !important;margin-bottom: 1px !important;box-shadow: none !important;border: none !important;vertical-align: middle !important;}.bmc-button{line-height: 36px !important;height:37px !important;text-decoration: none !important;display:inline-flex !important;color:#000000 !important;background-color:#FFDD00 !important;border-radius: 3px !important;border: 1px solid transparent !important;padding: 1px 9px !important;font-size: 22px !important;letter-spacing: 0.6px !important;box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;margin: 0 auto !important;font-family:'Cookie', cursive !important;-webkit-box-sizing: border-box !important;box-sizing: border-box !important;-o-transition: 0.3s all linear !important;-webkit-transition: 0.3s all linear !important;-moz-transition: 0.3s all linear !important;-ms-transition: 0.3s all linear !important;transition: 0.3s all linear !important;}.bmc-button:hover, .bmc-button:active, .bmc-button:focus {-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;text-decoration: none !important;box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;opacity: 0.85 !important;color:#000000 !important;}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet"><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/HEazcCDFS"><img src="https://bmc-cdn.nyc3.digitaloceanspaces.com/BMC-button-images/BMC-btn-logo.svg" alt="Buy me a coffee"><span style="margin-left:5px">Buy me a coffee</span></a></p>
          <p class="repo-owner">Made with &#9749; by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a>.</p>
        </aside>
      </div>
    </div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="./assets/js/languages.js"></script>
    <script src="./assets/js/treeInfo.js"></script>
    <style>
      .basmallah {
        font-family: 'Uthmani-Hafs', serif;
        font-size: 25px;
        text-align: center;
      }
      .ayat-text {
        font-family: 'Uthmani-Hafs', serif;
        font-size: 25px;
        text-align: center;
      }
    </style>
    <script>
      const baseUrl = 'https://ibbtek.github.io/simple-quran-api/api/'

      new Vue({
        el: '#app',
        data: {
          basmallah: 'بِسْمِ ٱللَّهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ',
          lang: 'ar',
          sura: 1,
          aya: 1,
          ayat: 7,
          revealed: 'Mecca',
          translator: '-',
          currentPage: 1,
          pageSize: 7,
          text: [],
          loading: false
        },
        watch: {
          sura (value) {
            let object = treeInfo.find(obj => obj.id === value)
            this.ayat = object.ayat
            this.revealed = object.revealed
            this.aya = 1
            this.currentPage = 1
            this.fetchData()
          },
          aya (value) {
            this.currentPage = Math.ceil(this.aya/this.pageSize) > 0 ? Math.ceil(this.aya/this.pageSize) : 1
          },
          currentPage (value) {
            /^\d*$/.test(value) && (value === '' || parseInt(value) <= this.totalPages)
            value ? this.fetchData() : ''
          },
          lang (value) {
            this.aya = 1
            this.fetchData()
          }
        },
        computed: {
          langList () {
            return languages
          },
          suraList () {
            return treeInfo
          },
          rtlLang () {
            if (this.lang == 'ar' || this.lang == 'fa' || this.lang == 'ur' || this.lang == 'dv' ||
            this.lang == 'ku' || this.lang == 'sd' || this.lang == 'ps' || this.lang == 'ug') {
              return true
            }
            return false
          },
          totalPages () {
            return Math.ceil(this.ayat/this.pageSize)
          }
        },
        filters: {
          basmallah (line) {
            if (line.aya == '001' && line.sura != '001') {
              return line.text.replace('بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ', '')
            }
            return line.text
          },
          oneDigit (value) {
          return parseInt(value, 10)
          }
        },
        created () {
          this.fetchData()
        },
        methods: {
          pageChange (value) {
            let page = parseInt(this.currentPage) + parseInt(value)
            if (page < 1) {
              if (this.sura > 1) {
                this.sura--
              } else {
                this.currentPage = 1
              }
            } else if (page > this.totalPages) {
              if (this.sura < 114) {
                this.sura++
              } else {
                this.currentPage = this.totalPages
              }
            } else {
              this.currentPage = page
            }
          },
          fetchData () {
            this.loading = true
            let url = baseUrl + this.lang + '/' + 's' + ('000' + this.sura).substr(-3)
            if (this.currentPage !== 1) {
              url = url + '-' + this.currentPage
            }
            url = url + '.json'
            axios.get(url).then(response => {
              this.text = response.data.results
              this.translator = this.text[0].translator
              this.loading = false
            }).catch(error => {
              this.loading = false
              console.log(error)
            })
          }
        }
      })
    </script>
  </body>
</html>
